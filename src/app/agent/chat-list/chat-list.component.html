<div class="container">
    <ng-container [ngTemplateOutlet]="chatCard"
                  [ngTemplateOutletContext]="{ chats: newChats, type: 'new', headline: 'New Chats', options: { joinButton: true } }" />

    <ng-container [ngTemplateOutlet]="chatCard"
                  [ngTemplateOutletContext]="{ chats: activeChats, type: 'active', headline: 'Active Chats', options: { joinButtonVerB: true } }" />

    <ng-container [ngTemplateOutlet]="chatCard"
                  [ngTemplateOutletContext]="{ chats: closedChats, type: 'old', headline: 'Closed Chats', options: { deleteButton: true, joinButtonVerB: true } }" />

</div>
<ng-template #chatCard let-options="options" let-headline="headline" let-chats="chats" let-type="type">
  <div class="chat-list-box {{ type }}">
    <h2 class="font-weight-400">{{headline}}({{ chats.length }})</h2>
    <p *ngIf="!chats.length">No {{type}} chats</p>
    <div class="chats">
      <div class="chat" *ngFor="let chat of chats">
        <div class="text-center" *ngIf="options.deleteButton">
          <button class="btn circle remove" (click)="deleteChat(chat.key)"><img src="./assets/images/trash.svg" /></button>
        </div>
        <div><b>Chat Id:</b> {{ chat.key }}</div>
        <div><b>Started at:</b> {{ chat.date }}</div>
        <div><b>Last Message:</b> {{ chat.cardMessage }}</div>
        <div>
          <button class="btn" *ngIf="options.joinButton" (click)="takeChat(chat.key)">Join</button>
          <a class="btn" *ngIf="options.joinButtonVerB" [routerLink]="'/agent/chats/' + chat.key">Join</a>
        </div>
      </div>
    </div>
  </div>
</ng-template>

